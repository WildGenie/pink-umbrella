@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Hosting
@using Microsoft.Extensions.Hosting
@inject IWebHostEnvironment _environment
@inject SignInManager<UserProfileModel> SignInManager
@inject UserManager<UserProfileModel> UserManager
@{
    var controllerName = (string) ViewData["Controller"];
    var actionName = (string) ViewData["Action"];
    var accountLiClass = controllerName == "Account" ? "selected" : "";
    var searchLiClass = controllerName == "Home" && actionName == "Search" ? "selected" : "";
    var profileLiClass = controllerName == "Profile" ? "selected" : "";
    var archiveLiClass = controllerName == "Archive" ? "selected" : "";
    var inventoryLiClass = controllerName == "Inventory" ? "selected" : "";
    var civicDutyLiClass = controllerName == "CivicDuty" ? "selected" : "";
    var shopLiClass = controllerName == "Shop" ? "selected" : "";
    var debugLiClass = controllerName == "Developer" ? "selected" : "";
    var privacyLiClass = controllerName == "Home" && actionName == "Privacy" ? "selected" : "";
    var aboutLiClass = controllerName == "Home" && actionName == "About" ? "selected" : "";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" 
      type="image/png" 
      href="/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    @if (_environment.IsProduction())
    {
    <title>@ViewData["Title"] - @_strings.SiteName</title>
    }
    else
    {
    <title>Beta - @ViewData["Title"] - @_strings.SiteName</title>
    }
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/fontawesome.min.css" integrity="sha256-CuUPKpitgFmSNQuPDL5cEfPOOJT/+bwUlhfumDJ9CI4=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/black-tie/jquery-ui.css" crossorigin="anonymous" />
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
            <div class="container">
                <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index"><i class="fa fa-umbrella accent-color"></i> @_strings.SiteName @if (!_environment.IsProduction()) { <i class="fas fa-robot" title="@_strings.BetaMsg"></i> }</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">
                    <ul class="navbar-nav flex-grow-1 highlight-selected">
                        <li class="nav-item @searchLiClass">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Search">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                        @if (SignInManager.IsSignedIn(User)) 
                        {
                            <li class="nav-item @accountLiClass">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Index" >
                                    <i class="fa fa-cogs"></i> Account
                                </a>
                            </li>
                            <li class="nav-item @profileLiClass">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Profile" asp-action="Index" asp-route-id="@null" >
                                    <i class="far fa-user-circle"></i> Profile
                                </a>
                            </li>
                            <li class="nav-item @archiveLiClass">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Archive" asp-action="Index" >
                                    <i class="fas fa-photo-video"></i> Media Archive
                                </a>
                            </li>
                            <li class="nav-item @inventoryLiClass">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Inventory" asp-action="Index" >
                                    <i class="fa fa-boxes"></i> Inventory
                                </a>
                            </li>
                            <li class="nav-item @civicDutyLiClass">
                                <a class="nav-link text-dark" asp-area="" asp-controller="CivicDuty" asp-action="Index" >
                                    <i class="far fa-handshake"></i> Civic Duty
                                </a>
                            </li>
                            <li class="nav-item @shopLiClass">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Shop" asp-action="Index" asp-route-handle="@null">
                                    <i class="fas fa-store"></i> Shop
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Logout" >
                                    <i class="fa fa-sign-out-alt"></i> Logout
                                </a>
                            </li>
                        }
                        else
                        {
                            <li class="nav-item @accountLiClass">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Login">
                                    <i class="fas fa-sign-in-alt"></i> Register or Login
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Search" asp-route-t="@SearchResultType.Shop">
                                    <i class="fas fa-store"></i> Shop
                                </a>
                            </li>
                        }
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            2020 <i class="fa fa-umbrella accent-color" style="transform: ScaleX(-1)"></i> @_strings.SiteName for @_strings.CityState
            &bull; <a href="@_strings.GitHubUrl" target="_blank"><i class="fab fa-github"></i> GitHub</a>
            &bull; <a asp-area="" asp-controller="Home" asp-action="Privacy"><i class="fas fa-user-secret"></i> Privacy</a>
            &bull; <a asp-area="" asp-controller="Home" asp-action="About"><i class="fas fa-question-circle"></i> About Us</a>
            &bull; <a href="@_strings.WikiUrl" target="_blank"><i class="fas fa-info-circle"></i> Wiki</a>
            @if (User.IsInRole(_strings.RoleDeveloper) || System.Diagnostics.Debugger.IsAttached)
            {
                <span> &bull; </span><a asp-area="" asp-controller="Developer" asp-action="Index"><i class="fas fa-robot"></i> Debug</a>
            }
            &bull; <a asp-area="" asp-controller="Home" asp-action="Links"><i class="fas fa-link"></i> Links</a>
            &bull; <a href="@_strings.ReportBugUrl" target="_blank"><i class="fas fa-bug"></i> Report Issue</a>
        </div>
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/fontawesome.min.js" integrity="sha256-NP9NujdEzS5m4ZxvNqkcbxyHB0dTRy9hG13RwTVBGwo=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
